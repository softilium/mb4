{% extends "layout.html" %}

{% block title %}User profile {% endblock %}

{% block content %}

<h1>User profile</h1>
<div id="vueapp">
    <div class="row">
        <div class="col">
            <button class="btn btn-primary" v-on:click.prevent="logout()">Logout</button>
        </div>
    </div>
</div>
<script>

    const App = {
        data() {
            return {
            }
        },
        methods: {
            async logout() {
                let res = await fetch(
                    "/api/users/logout",
                    { method: 'POST' }
                );
                if (res.ok)
                    window.location.href = '/'
                else {
                    this.showAlert = true;
                    this.alertText = await res.text();
                }
            }
        }
    };

    Vue.createApp(App).mount('#vueapp')

</script>

{% endblock %}
